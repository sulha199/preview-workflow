import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl, FormGroup } from '@angular/forms';
import { debounceTime } from 'rxjs';
import { WORKFLOW_EXPLANATION_TRANSLATIONS, WORKFLOW_NAME_TRANSLATIONS, } from '../../types';
import * as i0 from "@angular/core";
import * as i1 from "@azavista/components/shared";
import * as i2 from "@angular/common";
import * as i3 from "@angular/forms";
import * as i4 from "@angular/material/form-field";
import * as i5 from "@angular/material/input";
import * as i6 from "@angular/cdk/text-field";
import * as i7 from "@angular/material/button";
import * as i8 from "@angular/material/icon";
import * as i9 from "@ngx-translate/core";
import * as i10 from "../../pipes/apply-function.pipe";
export class WorkflowBuilderNodeFormHeaderComponent {
    constructor(sharedSvc) {
        this.sharedSvc = sharedSvc;
        this.editMode = false;
        this.canvasChanges = new EventEmitter();
        this.getWorkflowName = (formValueName) => {
            return (formValueName ||
                (this.controllerData?.factory.type
                    ? this.sharedSvc.translate(WORKFLOW_NAME_TRANSLATIONS[this.controllerData?.factory.type])
                    : ''));
        };
        this.getWorkflowDescription = (formValueDescription) => {
            return (formValueDescription ||
                (this.controllerData?.factory.type
                    ? this.sharedSvc.translate(WORKFLOW_EXPLANATION_TRANSLATIONS[this.controllerData?.factory.type])
                    : ''));
        };
    }
    ngOnInit() {
        if (this.controllerData) {
            this.formGroup = this.createFormGroup(this.controllerData);
            this.formGroup.valueChanges
                .pipe(debounceTime(200))
                .subscribe((changes) => this.canvasChanges.emit(changes));
        }
    }
    createFormGroup(controllerData) {
        return new FormGroup({
            description: new FormControl(controllerData.description),
            name: new FormControl(controllerData.name),
        });
    }
    toggleEditMode(forceValue) {
        this.editMode = forceValue ?? !this.editMode;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.10", ngImport: i0, type: WorkflowBuilderNodeFormHeaderComponent, deps: [{ token: i1.AzavistaSharedService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.10", type: WorkflowBuilderNodeFormHeaderComponent, selector: "azavista-workflow-builder-node-form-header", inputs: { editMode: "editMode", controllerData: "controllerData" }, outputs: { canvasChanges: "canvasChanges" }, ngImport: i0, template: "<div class=\"workflow-builder-node-item__header\" [class.edit-mode]=\"editMode\">\r\n  <ng-container *ngIf=\"!editMode\">\r\n    <a\r\n      class=\"workflow-builder-node-item__header__name\"\r\n    >\r\n      {{ formGroup?.value?.name | apply : getWorkflowName}}\r\n      <button (click)=\"toggleEditMode(true)\" mat-icon-button>\r\n        <mat-icon>create</mat-icon>\r\n      </button>\r\n    </a>\r\n    <div class=\"workflow-builder-node-item__header__description\">\r\n      {{ formGroup?.value?.description | apply: getWorkflowDescription }}\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"editMode && formGroup\">\r\n    <div class=\"workflow-builder-node-item__header__name\">\r\n      <mat-form-field>\r\n        <input\r\n          matInput\r\n          [formControl]=\"formGroup.controls.name\"\r\n          [placeholder]=\"'NAME' | translate\"\r\n        />\r\n        <mat-icon (click)=\"toggleEditMode(false)\" matSuffix>create</mat-icon>\r\n      </mat-form-field>\r\n\r\n    </div>\r\n    <div class=\"workflow-builder-node-item__header__description\">\r\n      <mat-form-field>\r\n        <textarea\r\n          matInput\r\n          cdkTextareaAutosize\r\n          [formControl]=\"formGroup.controls.description\"\r\n          [placeholder]=\"'DESCRIPTION' | translate\"\r\n        ></textarea>\r\n      </mat-form-field>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n", styles: [".mat-mdc-form-field-infix{min-height:36px}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:18px}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY( -24.75px) scale(var(--mat-mdc-form-field-floating-label-scale, .75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mdc-text-field--no-label:not(.mdc-text-field--outlined):not(.mdc-text-field--textarea) .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-floating-label{display:none}:host{display:block}:host ::ng-deep *{box-sizing:border-box;font-size:12px}.workflow-builder-node-item__header{font-weight:600;line-height:24px;margin-bottom:4px;font-size:11px;color:#797879}.workflow-builder-node-item__header azavista-grouped-field{margin-top:8px}.workflow-builder-node-item__header__name,.workflow-builder-node-item__header__description{display:flex;align-items:center;gap:4px;width:100%;text-wrap:pretty;overflow-wrap:anywhere}.workflow-builder-node-item__header__name .mat-mdc-form-field,.workflow-builder-node-item__header__description .mat-mdc-form-field{width:100%}.workflow-builder-node-item__header__name input,.workflow-builder-node-item__header__name textarea,.workflow-builder-node-item__header__description input,.workflow-builder-node-item__header__description textarea{font:inherit;background-color:transparent;width:100%;line-height:1.5em}.workflow-builder-node-item__header__name{font-size:1.2em;margin-bottom:8px;color:#666}.workflow-builder-node-item__header__name>button{--mdc-icon-button-icon-size: 14px;--mdc-icon-button-state-layer-size: 24px;overflow:hidden;top:0;right:0;padding:0}.workflow-builder-node-item__header__name mat-icon{font-size:1rem;padding:2px 0;cursor:pointer}.workflow-builder-node-item__header__description{font-size:.9em;line-height:1.5em}.edit-mode.workflow-builder-node-item__header__name{justify-content:flex-end}.edit-mode.workflow-builder-node-item__header__name mat-icon{position:absolute}\n"], dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.FormControlDirective, selector: "[formControl]", inputs: ["formControl", "disabled", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { kind: "component", type: i4.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i4.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }, { kind: "directive", type: i5.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "directive", type: i6.CdkTextareaAutosize, selector: "textarea[cdkTextareaAutosize]", inputs: ["cdkAutosizeMinRows", "cdkAutosizeMaxRows", "cdkTextareaAutosize", "placeholder"], exportAs: ["cdkTextareaAutosize"] }, { kind: "component", type: i7.MatIconButton, selector: "button[mat-icon-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "component", type: i8.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "pipe", type: i9.TranslatePipe, name: "translate" }, { kind: "pipe", type: i10.ApplyFunctionPipe, name: "apply" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.10", ngImport: i0, type: WorkflowBuilderNodeFormHeaderComponent, decorators: [{
            type: Component,
            args: [{ selector: 'azavista-workflow-builder-node-form-header', template: "<div class=\"workflow-builder-node-item__header\" [class.edit-mode]=\"editMode\">\r\n  <ng-container *ngIf=\"!editMode\">\r\n    <a\r\n      class=\"workflow-builder-node-item__header__name\"\r\n    >\r\n      {{ formGroup?.value?.name | apply : getWorkflowName}}\r\n      <button (click)=\"toggleEditMode(true)\" mat-icon-button>\r\n        <mat-icon>create</mat-icon>\r\n      </button>\r\n    </a>\r\n    <div class=\"workflow-builder-node-item__header__description\">\r\n      {{ formGroup?.value?.description | apply: getWorkflowDescription }}\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"editMode && formGroup\">\r\n    <div class=\"workflow-builder-node-item__header__name\">\r\n      <mat-form-field>\r\n        <input\r\n          matInput\r\n          [formControl]=\"formGroup.controls.name\"\r\n          [placeholder]=\"'NAME' | translate\"\r\n        />\r\n        <mat-icon (click)=\"toggleEditMode(false)\" matSuffix>create</mat-icon>\r\n      </mat-form-field>\r\n\r\n    </div>\r\n    <div class=\"workflow-builder-node-item__header__description\">\r\n      <mat-form-field>\r\n        <textarea\r\n          matInput\r\n          cdkTextareaAutosize\r\n          [formControl]=\"formGroup.controls.description\"\r\n          [placeholder]=\"'DESCRIPTION' | translate\"\r\n        ></textarea>\r\n      </mat-form-field>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n", styles: [".mat-mdc-form-field-infix{min-height:36px}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:18px}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY( -24.75px) scale(var(--mat-mdc-form-field-floating-label-scale, .75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mdc-text-field--no-label:not(.mdc-text-field--outlined):not(.mdc-text-field--textarea) .mat-mdc-form-field-infix{padding-top:6px;padding-bottom:6px}.mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-floating-label{display:none}:host{display:block}:host ::ng-deep *{box-sizing:border-box;font-size:12px}.workflow-builder-node-item__header{font-weight:600;line-height:24px;margin-bottom:4px;font-size:11px;color:#797879}.workflow-builder-node-item__header azavista-grouped-field{margin-top:8px}.workflow-builder-node-item__header__name,.workflow-builder-node-item__header__description{display:flex;align-items:center;gap:4px;width:100%;text-wrap:pretty;overflow-wrap:anywhere}.workflow-builder-node-item__header__name .mat-mdc-form-field,.workflow-builder-node-item__header__description .mat-mdc-form-field{width:100%}.workflow-builder-node-item__header__name input,.workflow-builder-node-item__header__name textarea,.workflow-builder-node-item__header__description input,.workflow-builder-node-item__header__description textarea{font:inherit;background-color:transparent;width:100%;line-height:1.5em}.workflow-builder-node-item__header__name{font-size:1.2em;margin-bottom:8px;color:#666}.workflow-builder-node-item__header__name>button{--mdc-icon-button-icon-size: 14px;--mdc-icon-button-state-layer-size: 24px;overflow:hidden;top:0;right:0;padding:0}.workflow-builder-node-item__header__name mat-icon{font-size:1rem;padding:2px 0;cursor:pointer}.workflow-builder-node-item__header__description{font-size:.9em;line-height:1.5em}.edit-mode.workflow-builder-node-item__header__name{justify-content:flex-end}.edit-mode.workflow-builder-node-item__header__name mat-icon{position:absolute}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.AzavistaSharedService }]; }, propDecorators: { editMode: [{
                type: Input
            }], controllerData: [{
                type: Input
            }], canvasChanges: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2Zsb3ctYnVpbGRlci1ub2RlLWZvcm0taGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2F6YXZpc3RhL3dvcmtmbG93LWJ1aWxkZXIvc3JjL2xpYi9jb21wb25lbnRzL3dvcmtmbG93LWJ1aWxkZXItbm9kZS1mb3JtLWhlYWRlci93b3JrZmxvdy1idWlsZGVyLW5vZGUtZm9ybS1oZWFkZXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYXphdmlzdGEvd29ya2Zsb3ctYnVpbGRlci9zcmMvbGliL2NvbXBvbmVudHMvd29ya2Zsb3ctYnVpbGRlci1ub2RlLWZvcm0taGVhZGVyL3dvcmtmbG93LWJ1aWxkZXItbm9kZS1mb3JtLWhlYWRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRS9FLE9BQU8sRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDeEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUVwQyxPQUFPLEVBR0gsaUNBQWlDLEVBQ2pDLDBCQUEwQixHQUM3QixNQUFNLGFBQWEsQ0FBQzs7Ozs7Ozs7Ozs7O0FBV3JCLE1BQU0sT0FBTyxzQ0FBc0M7SUFZL0MsWUFBb0IsU0FBZ0M7UUFBaEMsY0FBUyxHQUFULFNBQVMsQ0FBdUI7UUFSM0MsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUloQixrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFnQyxDQUFDO1FBNEIzRSxvQkFBZSxHQUFHLENBQUMsYUFBd0MsRUFBRSxFQUFFO1lBQzNELE9BQU8sQ0FDSCxhQUFhO2dCQUNiLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsSUFBSTtvQkFDOUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUNwQiwwQkFBMEIsQ0FDdEIsSUFBSSxDQUFDLGNBQWMsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUNwQyxDQUNKO29CQUNILENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FDWixDQUFDO1FBQ04sQ0FBQyxDQUFDO1FBRUYsMkJBQXNCLEdBQUcsQ0FDckIsb0JBQStDLEVBQ2pELEVBQUU7WUFDQSxPQUFPLENBQ0gsb0JBQW9CO2dCQUNwQixDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLElBQUk7b0JBQzlCLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FDcEIsaUNBQWlDLENBQzdCLElBQUksQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FDcEMsQ0FDSjtvQkFDSCxDQUFDLENBQUMsRUFBRSxDQUFDLENBQ1osQ0FBQztRQUNOLENBQUMsQ0FBQztJQWxEcUQsQ0FBQztJQUV4RCxRQUFRO1FBQ0osSUFBSSxJQUFJLENBQUMsY0FBYyxFQUFFO1lBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDM0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZO2lCQUN0QixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2lCQUN2QixTQUFTLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUNuQixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxPQUFjLENBQUMsQ0FDMUMsQ0FBQztTQUNUO0lBQ0wsQ0FBQztJQUVELGVBQWUsQ0FBQyxjQUF1QztRQUNuRCxPQUFPLElBQUksU0FBUyxDQUFDO1lBQ2pCLFdBQVcsRUFBRSxJQUFJLFdBQVcsQ0FBUyxjQUFjLENBQUMsV0FBVyxDQUFDO1lBQ2hFLElBQUksRUFBRSxJQUFJLFdBQVcsQ0FBUyxjQUFjLENBQUMsSUFBSSxDQUFDO1NBQ3JELENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxjQUFjLENBQUMsVUFBb0I7UUFDL0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ2pELENBQUM7K0dBbENRLHNDQUFzQzttR0FBdEMsc0NBQXNDLG1NQ3JCbkQsazRDQXVDQTs7NEZEbEJhLHNDQUFzQztrQkFMbEQsU0FBUzsrQkFDSSw0Q0FBNEM7NEdBUTdDLFFBQVE7c0JBQWhCLEtBQUs7Z0JBRUcsY0FBYztzQkFBdEIsS0FBSztnQkFFSSxhQUFhO3NCQUF0QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ2FudmFzLCBXb3JrZmxvd1R5cGUgfSBmcm9tICdAYXphdmlzdGEvd29ya2Zsb3ctYnVpbGRlci1zaGFyZWQnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wsIEZvcm1Hcm91cCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgQXphdmlzdGFTaGFyZWRTZXJ2aWNlIH0gZnJvbSAnQGF6YXZpc3RhL2NvbXBvbmVudHMvc2hhcmVkJztcbmltcG9ydCB7XG4gICAgQ2FudmFzQ29udHJvbGxlckRhdGEsXG4gICAgRm9ybUdyb3VwVHlwZSxcbiAgICBXT1JLRkxPV19FWFBMQU5BVElPTl9UUkFOU0xBVElPTlMsXG4gICAgV09SS0ZMT1dfTkFNRV9UUkFOU0xBVElPTlMsXG59IGZyb20gJy4uLy4uL3R5cGVzJztcblxudHlwZSBIZWFkZXJGb3JtR3JvdXBEYXRhID0gUGljazxDYW52YXMsICduYW1lJyB8ICdkZXNjcmlwdGlvbic+O1xuXG50eXBlIEhlYWRlckZvcm1Hcm91cCA9IEZvcm1Hcm91cDxGb3JtR3JvdXBUeXBlPEhlYWRlckZvcm1Hcm91cERhdGE+PjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhemF2aXN0YS13b3JrZmxvdy1idWlsZGVyLW5vZGUtZm9ybS1oZWFkZXInLFxuICAgIHRlbXBsYXRlVXJsOiBgLi93b3JrZmxvdy1idWlsZGVyLW5vZGUtZm9ybS1oZWFkZXIuY29tcG9uZW50Lmh0bWxgLFxuICAgIHN0eWxlVXJsczogWycuL3dvcmtmbG93LWJ1aWxkZXItbm9kZS1mb3JtLWhlYWRlci5jb21wb25lbnQuc2NzcyddLFxufSlcbmV4cG9ydCBjbGFzcyBXb3JrZmxvd0J1aWxkZXJOb2RlRm9ybUhlYWRlckNvbXBvbmVudDxcbiAgICBUIGV4dGVuZHMgV29ya2Zsb3dUeXBlID0gV29ya2Zsb3dUeXBlLFxuPiBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICAgIEBJbnB1dCgpIGVkaXRNb2RlID0gZmFsc2U7XG5cbiAgICBASW5wdXQoKSBjb250cm9sbGVyRGF0YT86IENhbnZhc0NvbnRyb2xsZXJEYXRhPFQ+O1xuXG4gICAgQE91dHB1dCgpIGNhbnZhc0NoYW5nZXMgPSBuZXcgRXZlbnRFbWl0dGVyPFBhcnRpYWw8SGVhZGVyRm9ybUdyb3VwRGF0YT4+KCk7XG5cbiAgICBmb3JtR3JvdXA/OiBIZWFkZXJGb3JtR3JvdXA7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHNoYXJlZFN2YzogQXphdmlzdGFTaGFyZWRTZXJ2aWNlKSB7fVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXJEYXRhKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1Hcm91cCA9IHRoaXMuY3JlYXRlRm9ybUdyb3VwKHRoaXMuY29udHJvbGxlckRhdGEpO1xuICAgICAgICAgICAgdGhpcy5mb3JtR3JvdXAudmFsdWVDaGFuZ2VzXG4gICAgICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKDIwMCkpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoY2hhbmdlcykgPT5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXNDaGFuZ2VzLmVtaXQoY2hhbmdlcyBhcyBhbnkpLFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVGb3JtR3JvdXAoY29udHJvbGxlckRhdGE6IENhbnZhc0NvbnRyb2xsZXJEYXRhPFQ+KTogSGVhZGVyRm9ybUdyb3VwIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGb3JtR3JvdXAoe1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IG5ldyBGb3JtQ29udHJvbDxzdHJpbmc+KGNvbnRyb2xsZXJEYXRhLmRlc2NyaXB0aW9uKSxcbiAgICAgICAgICAgIG5hbWU6IG5ldyBGb3JtQ29udHJvbDxzdHJpbmc+KGNvbnRyb2xsZXJEYXRhLm5hbWUpLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0b2dnbGVFZGl0TW9kZShmb3JjZVZhbHVlPzogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmVkaXRNb2RlID0gZm9yY2VWYWx1ZSA/PyAhdGhpcy5lZGl0TW9kZTtcbiAgICB9XG5cbiAgICBnZXRXb3JrZmxvd05hbWUgPSAoZm9ybVZhbHVlTmFtZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgZm9ybVZhbHVlTmFtZSB8fFxuICAgICAgICAgICAgKHRoaXMuY29udHJvbGxlckRhdGE/LmZhY3RvcnkudHlwZVxuICAgICAgICAgICAgICAgID8gdGhpcy5zaGFyZWRTdmMudHJhbnNsYXRlKFxuICAgICAgICAgICAgICAgICAgICAgIFdPUktGTE9XX05BTUVfVFJBTlNMQVRJT05TW1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRyb2xsZXJEYXRhPy5mYWN0b3J5LnR5cGVcbiAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIGdldFdvcmtmbG93RGVzY3JpcHRpb24gPSAoXG4gICAgICAgIGZvcm1WYWx1ZURlc2NyaXB0aW9uOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICAgICkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgZm9ybVZhbHVlRGVzY3JpcHRpb24gfHxcbiAgICAgICAgICAgICh0aGlzLmNvbnRyb2xsZXJEYXRhPy5mYWN0b3J5LnR5cGVcbiAgICAgICAgICAgICAgICA/IHRoaXMuc2hhcmVkU3ZjLnRyYW5zbGF0ZShcbiAgICAgICAgICAgICAgICAgICAgICBXT1JLRkxPV19FWFBMQU5BVElPTl9UUkFOU0xBVElPTlNbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udHJvbGxlckRhdGE/LmZhY3RvcnkudHlwZVxuICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgOiAnJylcbiAgICAgICAgKTtcbiAgICB9O1xufVxuIiwiPGRpdiBjbGFzcz1cIndvcmtmbG93LWJ1aWxkZXItbm9kZS1pdGVtX19oZWFkZXJcIiBbY2xhc3MuZWRpdC1tb2RlXT1cImVkaXRNb2RlXCI+XHJcbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFlZGl0TW9kZVwiPlxyXG4gICAgPGFcclxuICAgICAgY2xhc3M9XCJ3b3JrZmxvdy1idWlsZGVyLW5vZGUtaXRlbV9faGVhZGVyX19uYW1lXCJcclxuICAgID5cclxuICAgICAge3sgZm9ybUdyb3VwPy52YWx1ZT8ubmFtZSB8IGFwcGx5IDogZ2V0V29ya2Zsb3dOYW1lfX1cclxuICAgICAgPGJ1dHRvbiAoY2xpY2spPVwidG9nZ2xlRWRpdE1vZGUodHJ1ZSlcIiBtYXQtaWNvbi1idXR0b24+XHJcbiAgICAgICAgPG1hdC1pY29uPmNyZWF0ZTwvbWF0LWljb24+XHJcbiAgICAgIDwvYnV0dG9uPlxyXG4gICAgPC9hPlxyXG4gICAgPGRpdiBjbGFzcz1cIndvcmtmbG93LWJ1aWxkZXItbm9kZS1pdGVtX19oZWFkZXJfX2Rlc2NyaXB0aW9uXCI+XHJcbiAgICAgIHt7IGZvcm1Hcm91cD8udmFsdWU/LmRlc2NyaXB0aW9uIHwgYXBwbHk6IGdldFdvcmtmbG93RGVzY3JpcHRpb24gfX1cclxuICAgIDwvZGl2PlxyXG4gIDwvbmctY29udGFpbmVyPlxyXG5cclxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiZWRpdE1vZGUgJiYgZm9ybUdyb3VwXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwid29ya2Zsb3ctYnVpbGRlci1ub2RlLWl0ZW1fX2hlYWRlcl9fbmFtZVwiPlxyXG4gICAgICA8bWF0LWZvcm0tZmllbGQ+XHJcbiAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICBtYXRJbnB1dFxyXG4gICAgICAgICAgW2Zvcm1Db250cm9sXT1cImZvcm1Hcm91cC5jb250cm9scy5uYW1lXCJcclxuICAgICAgICAgIFtwbGFjZWhvbGRlcl09XCInTkFNRScgfCB0cmFuc2xhdGVcIlxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPG1hdC1pY29uIChjbGljayk9XCJ0b2dnbGVFZGl0TW9kZShmYWxzZSlcIiBtYXRTdWZmaXg+Y3JlYXRlPC9tYXQtaWNvbj5cclxuICAgICAgPC9tYXQtZm9ybS1maWVsZD5cclxuXHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJ3b3JrZmxvdy1idWlsZGVyLW5vZGUtaXRlbV9faGVhZGVyX19kZXNjcmlwdGlvblwiPlxyXG4gICAgICA8bWF0LWZvcm0tZmllbGQ+XHJcbiAgICAgICAgPHRleHRhcmVhXHJcbiAgICAgICAgICBtYXRJbnB1dFxyXG4gICAgICAgICAgY2RrVGV4dGFyZWFBdXRvc2l6ZVxyXG4gICAgICAgICAgW2Zvcm1Db250cm9sXT1cImZvcm1Hcm91cC5jb250cm9scy5kZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICBbcGxhY2Vob2xkZXJdPVwiJ0RFU0NSSVBUSU9OJyB8IHRyYW5zbGF0ZVwiXHJcbiAgICAgICAgPjwvdGV4dGFyZWE+XHJcbiAgICAgIDwvbWF0LWZvcm0tZmllbGQ+XHJcbiAgICA8L2Rpdj5cclxuICA8L25nLWNvbnRhaW5lcj5cclxuPC9kaXY+XHJcbiJdfQ==